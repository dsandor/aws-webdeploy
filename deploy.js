"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require("@aws-cdk/core");
const aws_cdk_static_website_1 = require("aws-cdk-static-website");
class MyWebStack extends aws_cdk_static_website_1.StaticWebsiteStack {
    constructor(scope, id) {
        super(scope, id, props);
    }
}
exports.MyWebStack = MyWebStack;
const workingPath = process.cwd();
const pkg = require(`${workingPath}/package.json`);
console.log('pkg:', pkg);
if (!pkg.webdeploy) {
    console.error('Error, package.json should have a "webdeploy" configuration section.');
    process.exit(2);
}
const props = {
    websiteDistPath: pkg.webdeploy.distPath,
    deploymentVersion: pkg.deploymentVersion || pkg.version,
    resourcePrefix: pkg.webdeploy.resourcePrefix,
    indexDocument: pkg.webdeploy.indexDocument || 'index.html',
    certificateArn: pkg.certificateArn,
    domainNames: pkg.webdeploy.domainNames,
};
console.log('Using the following properties for deployment:');
console.table(props);
const app = new cdk.App();
new MyWebStack(app, pkg.webdeploy.stackName || pkg.name);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwbG95LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGVwbG95LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUNBQXNDO0FBQ3RDLG1FQUFpRjtBQUVqRixNQUFhLFVBQVcsU0FBUSwyQ0FBa0I7SUFDaEQsWUFBWSxLQUFjLEVBQUUsRUFBVTtRQUVwQyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMxQixDQUFDO0NBQ0Y7QUFMRCxnQ0FLQztBQUVELE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUVsQyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxXQUFXLGVBQWUsQ0FBQyxDQUFDO0FBRW5ELE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBRXpCLElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO0lBQ2xCLE9BQU8sQ0FBQyxLQUFLLENBQUMsc0VBQXNFLENBQUMsQ0FBQztJQUN0RixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2pCO0FBRUQsTUFBTSxLQUFLLEdBQXdCO0lBQ2pDLGVBQWUsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLFFBQVE7SUFDdkMsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixJQUFJLEdBQUcsQ0FBQyxPQUFPO0lBQ3ZELGNBQWMsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLGNBQWM7SUFDNUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxTQUFTLENBQUMsYUFBYSxJQUFJLFlBQVk7SUFDMUQsY0FBYyxFQUFFLEdBQUcsQ0FBQyxjQUFjO0lBQ2xDLFdBQVcsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLFdBQVc7Q0FDdkMsQ0FBQztBQUVGLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0RBQWdELENBQUMsQ0FBQztBQUM5RCxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBRXJCLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzFCLElBQUksVUFBVSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLFNBQVMsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2RrID0gcmVxdWlyZSgnQGF3cy1jZGsvY29yZScpO1xuaW1wb3J0IHsgU3RhdGljV2Vic2l0ZVN0YWNrLCBJU3RhdGljV2Vic2l0ZVByb3BzIH0gZnJvbSAnYXdzLWNkay1zdGF0aWMtd2Vic2l0ZSc7XG5cbmV4cG9ydCBjbGFzcyBNeVdlYlN0YWNrIGV4dGVuZHMgU3RhdGljV2Vic2l0ZVN0YWNrIHtcbiAgY29uc3RydWN0b3Ioc2NvcGU6IGNkay5BcHAsIGlkOiBzdHJpbmcgKSB7XG4gICAgXG4gICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcyk7XG4gIH1cbn1cblxuY29uc3Qgd29ya2luZ1BhdGggPSBwcm9jZXNzLmN3ZCgpO1xuXG5jb25zdCBwa2cgPSByZXF1aXJlKGAke3dvcmtpbmdQYXRofS9wYWNrYWdlLmpzb25gKTtcblxuY29uc29sZS5sb2coJ3BrZzonLCBwa2cpO1xuXG5pZiAoIXBrZy53ZWJkZXBsb3kpIHtcbiAgY29uc29sZS5lcnJvcignRXJyb3IsIHBhY2thZ2UuanNvbiBzaG91bGQgaGF2ZSBhIFwid2ViZGVwbG95XCIgY29uZmlndXJhdGlvbiBzZWN0aW9uLicpO1xuICBwcm9jZXNzLmV4aXQoMik7XG59XG5cbmNvbnN0IHByb3BzOiBJU3RhdGljV2Vic2l0ZVByb3BzID0ge1xuICB3ZWJzaXRlRGlzdFBhdGg6IHBrZy53ZWJkZXBsb3kuZGlzdFBhdGgsXG4gIGRlcGxveW1lbnRWZXJzaW9uOiBwa2cuZGVwbG95bWVudFZlcnNpb24gfHwgcGtnLnZlcnNpb24sXG4gIHJlc291cmNlUHJlZml4OiBwa2cud2ViZGVwbG95LnJlc291cmNlUHJlZml4LFxuICBpbmRleERvY3VtZW50OiBwa2cud2ViZGVwbG95LmluZGV4RG9jdW1lbnQgfHwgJ2luZGV4Lmh0bWwnLFxuICBjZXJ0aWZpY2F0ZUFybjogcGtnLmNlcnRpZmljYXRlQXJuLFxuICBkb21haW5OYW1lczogcGtnLndlYmRlcGxveS5kb21haW5OYW1lcyxcbn07XG5cbmNvbnNvbGUubG9nKCdVc2luZyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXMgZm9yIGRlcGxveW1lbnQ6Jyk7XG5jb25zb2xlLnRhYmxlKHByb3BzKTtcblxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcbm5ldyBNeVdlYlN0YWNrKGFwcCwgcGtnLndlYmRlcGxveS5zdGFja05hbWUgfHwgcGtnLm5hbWUpOyJdfQ==