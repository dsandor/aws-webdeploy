"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require("@aws-cdk/core");
const aws_cdk_static_website_1 = require("aws-cdk-static-website");
class MyWebStack extends aws_cdk_static_website_1.StaticWebsiteStack {
    constructor(scope, id) {
        super(scope, id, props);
    }
}
exports.MyWebStack = MyWebStack;
const workingPath = process.cwd();
const pkg = require(`${workingPath}/package.json`);
if (!pkg.webdeploy) {
    console.error('Error, package.json should have a "webdeploy" configuration section.');
    process.exit(2);
}
const props = {
    websiteDistPath: pkg.webdeploy.distPath || pkg.webdeploy.websiteDistPath,
    deploymentVersion: pkg.deploymentVersion || pkg.version,
    resourcePrefix: pkg.webdeploy.resourcePrefix,
    indexDocument: pkg.webdeploy.indexDocument || 'index.html',
    certificateArn: pkg.certificateArn,
    domainNames: pkg.webdeploy.domainNames,
};
console.log('Using the following properties for deployment:');
console.table(props);
const app = new cdk.App();
new MyWebStack(app, pkg.webdeploy.stackName || pkg.name);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwbG95LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGVwbG95LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUNBQXNDO0FBQ3RDLG1FQUFpRjtBQUVqRixNQUFhLFVBQVcsU0FBUSwyQ0FBa0I7SUFDaEQsWUFBWSxLQUFjLEVBQUUsRUFBVTtRQUVwQyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMxQixDQUFDO0NBQ0Y7QUFMRCxnQ0FLQztBQUVELE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUVsQyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxXQUFXLGVBQWUsQ0FBQyxDQUFDO0FBRW5ELElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO0lBQ2xCLE9BQU8sQ0FBQyxLQUFLLENBQUMsc0VBQXNFLENBQUMsQ0FBQztJQUN0RixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2pCO0FBRUQsTUFBTSxLQUFLLEdBQXdCO0lBQ2pDLGVBQWUsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLFFBQVEsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLGVBQWU7SUFDeEUsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixJQUFJLEdBQUcsQ0FBQyxPQUFPO0lBQ3ZELGNBQWMsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLGNBQWM7SUFDNUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxTQUFTLENBQUMsYUFBYSxJQUFJLFlBQVk7SUFDMUQsY0FBYyxFQUFFLEdBQUcsQ0FBQyxjQUFjO0lBQ2xDLFdBQVcsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLFdBQVc7Q0FDdkMsQ0FBQztBQUVGLE9BQU8sQ0FBQyxHQUFHLENBQUMsZ0RBQWdELENBQUMsQ0FBQztBQUM5RCxPQUFPLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0FBRXJCLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzFCLElBQUksVUFBVSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLFNBQVMsSUFBSSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2RrID0gcmVxdWlyZSgnQGF3cy1jZGsvY29yZScpO1xuaW1wb3J0IHsgU3RhdGljV2Vic2l0ZVN0YWNrLCBJU3RhdGljV2Vic2l0ZVByb3BzIH0gZnJvbSAnYXdzLWNkay1zdGF0aWMtd2Vic2l0ZSc7XG5cbmV4cG9ydCBjbGFzcyBNeVdlYlN0YWNrIGV4dGVuZHMgU3RhdGljV2Vic2l0ZVN0YWNrIHtcbiAgY29uc3RydWN0b3Ioc2NvcGU6IGNkay5BcHAsIGlkOiBzdHJpbmcgKSB7XG4gICAgXG4gICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcyk7XG4gIH1cbn1cblxuY29uc3Qgd29ya2luZ1BhdGggPSBwcm9jZXNzLmN3ZCgpO1xuXG5jb25zdCBwa2cgPSByZXF1aXJlKGAke3dvcmtpbmdQYXRofS9wYWNrYWdlLmpzb25gKTtcblxuaWYgKCFwa2cud2ViZGVwbG95KSB7XG4gIGNvbnNvbGUuZXJyb3IoJ0Vycm9yLCBwYWNrYWdlLmpzb24gc2hvdWxkIGhhdmUgYSBcIndlYmRlcGxveVwiIGNvbmZpZ3VyYXRpb24gc2VjdGlvbi4nKTtcbiAgcHJvY2Vzcy5leGl0KDIpO1xufVxuXG5jb25zdCBwcm9wczogSVN0YXRpY1dlYnNpdGVQcm9wcyA9IHtcbiAgd2Vic2l0ZURpc3RQYXRoOiBwa2cud2ViZGVwbG95LmRpc3RQYXRoIHx8IHBrZy53ZWJkZXBsb3kud2Vic2l0ZURpc3RQYXRoLFxuICBkZXBsb3ltZW50VmVyc2lvbjogcGtnLmRlcGxveW1lbnRWZXJzaW9uIHx8IHBrZy52ZXJzaW9uLFxuICByZXNvdXJjZVByZWZpeDogcGtnLndlYmRlcGxveS5yZXNvdXJjZVByZWZpeCxcbiAgaW5kZXhEb2N1bWVudDogcGtnLndlYmRlcGxveS5pbmRleERvY3VtZW50IHx8ICdpbmRleC5odG1sJyxcbiAgY2VydGlmaWNhdGVBcm46IHBrZy5jZXJ0aWZpY2F0ZUFybixcbiAgZG9tYWluTmFtZXM6IHBrZy53ZWJkZXBsb3kuZG9tYWluTmFtZXMsXG59O1xuXG5jb25zb2xlLmxvZygnVXNpbmcgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzIGZvciBkZXBsb3ltZW50OicpO1xuY29uc29sZS50YWJsZShwcm9wcyk7XG5cbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG5uZXcgTXlXZWJTdGFjayhhcHAsIHBrZy53ZWJkZXBsb3kuc3RhY2tOYW1lIHx8IHBrZy5uYW1lKTsiXX0=