"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require("@aws-cdk/core");
const aws_cdk_static_website_1 = require("aws-cdk-static-website");
class MyWebStack extends aws_cdk_static_website_1.StaticWebsiteStack {
    constructor(scope, id) {
        super(scope, id, props);
    }
}
exports.MyWebStack = MyWebStack;
const workingPath = process.cwd();
const pkg = require(`${workingPath}/package.json`);
if (!pkg.webdeploy) {
    console.error('Error, package.json should have a "webdeploy" configuration section.');
    process.exit(2);
}
const props = {
    websiteDistPath: pkg.webdeploy.distPath || pkg.webdeploy.websiteDistPath,
    deploymentVersion: pkg.deploymentVersion || pkg.version,
    resourcePrefix: pkg.webdeploy.resourcePrefix,
    indexDocument: pkg.webdeploy.indexDocument || 'index.html',
    certificateArn: pkg.webdeploy.certificateArn,
    domainNames: pkg.webdeploy.domainNames,
};
console.log('Using the following properties for deployment:');
console.table(props);
const app = new cdk.App();
new MyWebStack(app, pkg.webdeploy.stackName || pkg.name);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwbG95LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGVwbG95LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUNBQXNDO0FBQ3RDLG1FQUFpRjtBQUVqRixNQUFhLFVBQVcsU0FBUSwyQ0FBa0I7SUFDaEQsWUFBWSxLQUFjLEVBQUUsRUFBVTtRQUVwQyxLQUFLLENBQUMsS0FBSyxFQUFFLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztJQUMxQixDQUFDO0NBQ0Y7QUFMRCxnQ0FLQztBQUVELE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUVsQyxNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsR0FBRyxXQUFXLGVBQWUsQ0FBQyxDQUFDO0FBRW5ELElBQUksQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFO0lBQ2xCLE9BQU8sQ0FBQyxLQUFLLENBQUMsc0VBQXNFLENBQUMsQ0FBQztJQUN0RixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0NBQ2pCO0FBRUQsTUFBTSxLQUFLLEdBQXdCO0lBQ2pDLGVBQWUsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLFFBQVEsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLGVBQWU7SUFDeEUsaUJBQWlCLEVBQUUsR0FBRyxDQUFDLGlCQUFpQixJQUFJLEdBQUcsQ0FBQyxPQUFPO0lBQ3ZELGNBQWMsRUFBRSxHQUFHLENBQUMsU0FBUyxDQUFDLGNBQWM7SUFDNUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxTQUFTLENBQUMsYUFBYSxJQUFJLFlBQVk7SUFDMUQsY0FBYyxFQUFFLEdBQUcsQ0FBQyxTQUFTLENBQUMsY0FBYztJQUM1QyxXQUFXLEVBQUUsR0FBRyxDQUFDLFNBQVMsQ0FBQyxXQUFXO0NBQ3ZDLENBQUM7QUFFRixPQUFPLENBQUMsR0FBRyxDQUFDLGdEQUFnRCxDQUFDLENBQUM7QUFDOUQsT0FBTyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUVyQixNQUFNLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUMxQixJQUFJLFVBQVUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLFNBQVMsQ0FBQyxTQUFTLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNkayA9IHJlcXVpcmUoJ0Bhd3MtY2RrL2NvcmUnKTtcbmltcG9ydCB7IFN0YXRpY1dlYnNpdGVTdGFjaywgSVN0YXRpY1dlYnNpdGVQcm9wcyB9IGZyb20gJ2F3cy1jZGstc3RhdGljLXdlYnNpdGUnO1xuXG5leHBvcnQgY2xhc3MgTXlXZWJTdGFjayBleHRlbmRzIFN0YXRpY1dlYnNpdGVTdGFjayB7XG4gIGNvbnN0cnVjdG9yKHNjb3BlOiBjZGsuQXBwLCBpZDogc3RyaW5nICkge1xuICAgIFxuICAgIHN1cGVyKHNjb3BlLCBpZCwgcHJvcHMpO1xuICB9XG59XG5cbmNvbnN0IHdvcmtpbmdQYXRoID0gcHJvY2Vzcy5jd2QoKTtcblxuY29uc3QgcGtnID0gcmVxdWlyZShgJHt3b3JraW5nUGF0aH0vcGFja2FnZS5qc29uYCk7XG5cbmlmICghcGtnLndlYmRlcGxveSkge1xuICBjb25zb2xlLmVycm9yKCdFcnJvciwgcGFja2FnZS5qc29uIHNob3VsZCBoYXZlIGEgXCJ3ZWJkZXBsb3lcIiBjb25maWd1cmF0aW9uIHNlY3Rpb24uJyk7XG4gIHByb2Nlc3MuZXhpdCgyKTtcbn1cblxuY29uc3QgcHJvcHM6IElTdGF0aWNXZWJzaXRlUHJvcHMgPSB7XG4gIHdlYnNpdGVEaXN0UGF0aDogcGtnLndlYmRlcGxveS5kaXN0UGF0aCB8fCBwa2cud2ViZGVwbG95LndlYnNpdGVEaXN0UGF0aCxcbiAgZGVwbG95bWVudFZlcnNpb246IHBrZy5kZXBsb3ltZW50VmVyc2lvbiB8fCBwa2cudmVyc2lvbixcbiAgcmVzb3VyY2VQcmVmaXg6IHBrZy53ZWJkZXBsb3kucmVzb3VyY2VQcmVmaXgsXG4gIGluZGV4RG9jdW1lbnQ6IHBrZy53ZWJkZXBsb3kuaW5kZXhEb2N1bWVudCB8fCAnaW5kZXguaHRtbCcsXG4gIGNlcnRpZmljYXRlQXJuOiBwa2cud2ViZGVwbG95LmNlcnRpZmljYXRlQXJuLFxuICBkb21haW5OYW1lczogcGtnLndlYmRlcGxveS5kb21haW5OYW1lcyxcbn07XG5cbmNvbnNvbGUubG9nKCdVc2luZyB0aGUgZm9sbG93aW5nIHByb3BlcnRpZXMgZm9yIGRlcGxveW1lbnQ6Jyk7XG5jb25zb2xlLnRhYmxlKHByb3BzKTtcblxuY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcbm5ldyBNeVdlYlN0YWNrKGFwcCwgcGtnLndlYmRlcGxveS5zdGFja05hbWUgfHwgcGtnLm5hbWUpOyJdfQ==